/*1303763041,176820663*/

if (window.CavalryLogger) { CavalryLogger.start_js(["BOawC"]); }

(function(){var l={check:false,baseline:false};var k=new URI('/common/scribe_endpoint.php').getQualifiedURI();var h=function(r){var q={c:'v6check',m:r};new AsyncSignal(k.toString(),q).send();};var c=function(q){var r=new URI('/ajax/v6.php').getQualifiedURI().setSubdomain(q).setQueryData({v:q});return r;};var j=function(q){var r=document.createElement('script');r.id=q;r.type='text/javascript';r.async=true;return r;};var g=function(r,s,q){r.src=s.addQueryData({pingonly:q}).toString();f.appendChild(r);};var f=Bootloader.getHardpoint();var o=c('check6');var m=c('check4');baseline4=j('b4');check6=j('v6');baseline4.onload=baseline4.onerror=function(){window._ip_baseline_elapsed=(new Date().getTime())-window._ip_starttime;l.baseline=true;};check6.onload=function(){window._ip_check_elapsed=(new Date().getTime())-window._ip_starttime;l.check=true;};var e=check6.onerror=function(){l.check="v6fail";check4=j('v4');check4.onload=check4.onerror=function(){window._ip_check_elapsed=(new Date().getTime())-window._ip_starttime;l.check="v4done";};g(check4,m,false);};var a=function(){if(l.check===false){DOM.remove(DOM.find(document,'script[id="v6"]'));window._ip_to=true;e();}};var b=function(){clearInterval(i);var s=["v6","v4","b4"];for(var r=0;r<s.length;++r){var q=DOM.scry(document,'script[id="'+s[r]+'"]');if(1==q.length)DOM.remove(q[0]);}};var i;var p=function(){if(l.baseline){var q={};if(l.check=="v4done"){clearInterval(i);if('version' in window._ip_version){q.address=window._ip_version.address;q.version=window._ip_version.version;q.variant=window._ip_version.variant;q.w=window._ip_w;q.status='broken v6';}else q.status='no connectivity';q.to=window._ip_to;q.elapsed=window._ip_check_elapsed;q.baseline_elapsed=window._ip_baseline_elapsed;h(JSON.stringify(q));}else if(l.check===true){clearInterval(i);q.address=window._ip_version.address;q.version=window._ip_version.version;q.variant=window._ip_version.variant;q.w=window._ip_w;q.to=window._ip_to;q.elapsed=window._ip_check_elapsed;q.baseline_elapsed=window._ip_baseline_elapsed;h(JSON.stringify(q));}}};window._ip_to=false;window._ip_starttime=(new Date().getTime());window._ip_version={};window._ip_w={};g(check6,o,false);g(baseline4,m,true);var n=setTimeout(a,30000);var d=setTimeout(b,60000);i=setInterval(p,1000);})();
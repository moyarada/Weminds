/*1306249087,176820665*/

if (window.CavalryLogger) { CavalryLogger.start_js(["I3dwf"]); }

if(!window.CommentAdminPanelController){window.CommentAdminPanelController=function(a){copy_properties(this,{channel:a.channel,controllerID:a.controllerID,commentIDs:a.commentIDs,domIDs:a.domIDs,blacklistedActors:a.blacklistedActors,actorToCommentInfoMap:a.actorToCommentIDMap,commentInfoMap:a.commentInfoMap,inAggregatedView:a.inAggregatedView,inModerationQueue:a.inModerationQueue,inContextualDialog:a.inContextualDialog,loggedIn:a.loggedIn,userOwnsPages:a.userOwnsPages,recentlyBlacklistedActors:a.blacklistedActors});this.controlledRegion=$(this.controllerID);this.attachClickHandlers();if(this.inModerationQueue)this.registerModeratorQueueHandlers(true);if(this.inContextualDialog)this.attachContextualDialogHandlers();if(!this.inAggregatedView)UnverifiedXD.init({autoResize:true,channelUrl:a.channel,hideOverflow:true,newResizeMethod:true,resizeWidth:false});};copy_properties(CommentAdminPanelController,{allControllers:{},mainController:null,contextualControllers:{},initController:function(c){var a=new CommentAdminPanelController(c);var b=c.controllerID;CommentAdminPanelController.allControllers[b]=a;if(a.inContextualDialog){CommentAdminPanelController.contextualControllers[b]=a;}else CommentAdminPanelController.mainController=a;},syncController:function(c,a){var b=CommentAdminPanelController.allControllers[c];b.attachClickHandlers();if(!b.isControllingModerationQueue())return;b.deselectComments(a);b.registerModeratorQueueHandlers(false);b.synchronizeModeratorQueueUI();},resetController:function(b){var a=CommentAdminPanelController.allControllers[b];a.resetController();},updateController:function(f,c,g,b,a,d){var e=CommentAdminPanelController.allControllers[f];e.updateController(c,g,b,a,d);if(!CommentAdminPanelController.mainController.loggedIn)MultiLoginPopup.reattachLoginInterceptors();if(!e.isControllingModerationQueue())return;e.registerModeratorQueueHandlers(false);e.synchronizeModeratorQueueUI();},registerMoreCommentsLinkHandler:function(b,c){var a=CommentAdminPanelController.allControllers[b];a.registerMoreCommentsLinkHandler(c);},notifyCommentCreated:function(a){if(!CommentAdminPanelController.mainController.channel)return;UnverifiedXD.send({type:'commentCreated',href:a.href,parentCommentID:a.parentCommentID,commentID:a.commentID});},notifyCommentRemoved:function(a){if(!CommentAdminPanelController.mainController.channel)return;UnverifiedXD.send({type:'commentRemoved',href:a.href,commentID:a.commentID});},markAsShowingAllReplies:function(d){var g=d+' a.fbUpDownVoteOption';var f=DOM.scry(document.documentElement,g);var i=d+' li.fbUpDownVoteOption a.itemAnchor';var h=DOM.scry(document.documentElement,i);var c=f.concat(h);for(var e=0;e<c.length;e++){var a=c[e];var b=new URI(a.getAttribute('ajaxify'));b.addQueryData({show_all_replies:1});a.setAttribute('ajaxify',b.toString());}},setLoggedIn:function(a){CommentAdminPanelController.mainController.loggedIn=a;}});copy_properties(CommentAdminPanelController.prototype,{isControllingModerationQueue:function(){var a=this==CommentAdminPanelController.mainController&&this.inModerationQueue;return a;},resetController:function(){this.commentIDs=[];this.domIDs=[];},updateController:function(d,f,c,b,e){d.forEach(function(g){this.commentIDs.push(g);},this);f.forEach(function(g){this.domIDs.push(g);},this);copy_properties(this.blacklistedActors,c);for(var a in b){if(!this.actorToCommentInfoMap[a])this.actorToCommentInfoMap[a]=[];b[a].forEach(function(g){this.actorToCommentInfoMap[a].push(g);},this);}copy_properties(this.commentInfoMap,e);this.attachClickHandlers();},attachClickHandlers:function(){for(var g=0;g<this.domIDs.length;g++){var e='li[id="'+this.domIDs[g]+'"]';var d=DOM.scry(this.controlledRegion,e);if(d.length===0)continue;var c=d[0];var b=DOM.scry(c,'a.uiCloseButton');Event.listen(c,'mouseleave',this.closeStickyMenuFlyouts.bind(this,b));var k=DOM.scry(c,'.fbModerateDropdownContainer');if(k.length>0){var j=k[0];var l=DOM.find(j,'.fbModerateDropdownLink');Event.listen(l,'mouseover',function(q,event){CSS.addClass(q,'fbUnderlineText');}.curry(l));Event.listen(l,'mouseout',function(q,event){CSS.removeClass(q,'fbUnderlineText');}.curry(l));var f=DOM.find(j,'.fbModerationDropdownList');Event.listen(l,'click',this.exposeDropDownMenu.bind(this,l,f));Event.listen(f.parentNode,'mouseleave',this.concealDropDownMenu.bind(this,l,f));this.attachDropDownHandlers(c,this.commentIDs[g],f);}var a=this.commentInfoMap[this.commentIDs[g]].actor;var h=!!this.recentlyBlacklistedActors[a];if(h){var p=DOM.scry(c,'.fbUndoBlacklistLink');if(p.length>0){var o=p[0];Event.listen(o,'click',this.toggleBlackListAndSync.bind(this,this.commentIDs[g]));}}}var n=DOM.scry(this.controlledRegion,'.fbReplyButton');var m=DOM.scry(this.controlledRegion,'.fbReplyAfterLoginButton');for(var i=0;i<n.length;i++)if(this.loggedIn){CSS.show(n[i]);CSS.hide(m[i]);}else{CSS.hide(n[i]);CSS.show(m[i]);}},closeStickyMenuFlyouts:function(a,event){Toggler.hide();for(var b=0;b<a.length;b++)a[b].blur();},attachDropDownHandlers:function(c,d,e){var b=DOM.scry(e,'.fbBanUser');if(b.length>0){var a=b[0];var f=DOM.find(a,'^.fbFeedbackPost');if(f.id.startsWith(d))Event.listen(a,'click',this.toggleBlackListAndSync.bind(this,d));}},exposeDropDownMenu:function(b,a,event){if(CSS.shown(a))return this.concealDropDownMenu(b,a,event);Event.stop(event);CSS.show(a);a.focus();b.blur();return false;},concealDropDownMenu:function(b,a,event){Event.stop(event);CSS.removeClass(b,'fbUnderlineText');CSS.hide(a);b.blur();return false;},registerMoreCommentsLinkHandler:function(c){var a=c.pager_id;if(!ge(a))return;var b=$(a);Event.listen(b,'click',this.fetchMoreComments.bind(this,c,b));},deselectComments:function(a){for(var b=0;b<a.length;b++)delete this.selectedCommentsMap[a[b]];},registerModeratorQueueHandlers:function(e){if(e)this.selectedCommentsMap={};this.selectableComments=this.findSelectableComments();this.selectableCheckboxes=[];this.selectAllCheckBoxes=DOM.scry(this.controlledRegion,'.fbSelectAllCheckbox');this.approveButtons=DOM.scry(this.controlledRegion,'.fbApproveButton');this.removeButtons=DOM.scry(this.controlledRegion,'.fbRemoveButton');for(var f=0;f<this.selectableComments.length;f++){var c=this.selectableComments[f].id;var d=!!this.selectedCommentsMap[c];this.setCommentSelection(this.selectableComments[f],d);var a=DOM.find(this.selectableComments[f],'.fbCommentCheckbox');var b=DOM.find(this.selectableComments[f],'.UIImageBlock_Content');Event.listen(a,'click',this.toggleCommentSelection.bind(this));Event.listen(this.selectableComments[f],'click',this.toggleCommentSelection.bind(this));a.checked=d;this.selectableCheckboxes.push(a);}for(var g=0;g<this.selectAllCheckBoxes.length;g++){this.selectAllCheckBoxes[g].checked=false;this.selectAllCheckBoxes[g].disabled=this.selectableComments.length===0;Event.listen(this.selectAllCheckBoxes[g],'click',this.toggleSelectAllCheckbox.bind(this,this.selectAllCheckBoxes[g]));}for(var h=0;h<this.approveButtons.length;h++)Event.listen(this.approveButtons[h],'click',this.setBulkPrivacy.bind(this,false));for(var i=0;i<this.removeButtons.length;i++)Event.listen(this.removeButtons[i],'click',this.setBulkPrivacy.bind(this,true));},findSelectableComments:function(){var c=DOM.scry(this.controlledRegion,'.fbTopLevelComment');var b=[];for(var a=0;a<c.length;a++)if((DOM.scry(c[a],'.fbCommentCheckbox').length===1)&&(DOM.scry(c[a],'.fbCommentOverlay').length===0))b.push(c[a]);return b;},toggleCommentSelection:function(event){var b={a:true};var d=event.getTarget();var f=d.tagName.toLowerCase();var e=d.parentNode.tagName.toLowerCase();if(b[f]||b[e])return;var a=CSS.hasClass(d,'fbFeedbackPost')?d:DOM.find(d,'^.fbFeedbackPost');var g=this.commentIsSelected(a);var c=!g;this.setCommentSelection(a,c);this.synchronizeModeratorQueueUI();if(CSS.hasClass(d,'fbCommentCheckbox'))Event.stop(event);},commentIsSelected:function(a){return CSS.hasClass(a,'fbCommentSelected');},setCommentSelection:function(a,b){if(b){this.selectComment(a);}else this.deselectComment(a);},selectComment:function(a){CSS.addClass(a,'fbCommentSelected');this.selectedCommentsMap[a.id]=true;DOM.find(a,'.fbCommentCheckbox').checked=true;},deselectComment:function(a){CSS.removeClass(a,'fbCommentSelected');delete this.selectedCommentsMap[a.id];DOM.find(a,'.fbCommentCheckbox').checked=false;},toggleSelectAllCheckbox:function(a,event){Event.stop(event);var c=a.checked;for(var b=0;b<this.selectableComments.length;b++){this.setCommentSelection(this.selectableComments[b],a.checked);this.selectableCheckboxes[b].checked=c;}this.synchronizeBulkModerationCheckboxes(c);this.synchronizeBulkModerationButtons(c);},synchronizeModeratorQueueUI:function(){var b=0;for(var a=0;a<this.selectableCheckboxes.length;a++)if(this.selectableCheckboxes[a].checked)b++;var c=this.selectableCheckboxes.length>0&&b==this.selectableCheckboxes.length;this.synchronizeBulkModerationCheckboxes(c);this.synchronizeBulkModerationButtons(b>0);},synchronizeBulkModerationCheckboxes:function(b){for(var a=0;a<this.selectAllCheckBoxes.length;a++)this.selectAllCheckBoxes[a].checked=b;},synchronizeBulkModerationButtons:function(c){for(var a=0;a<this.approveButtons.length;a++)Button.setEnabled(this.approveButtons[a],c);for(var b=0;b<this.removeButtons.length;b++)Button.setEnabled(this.removeButtons[b],c);},setBulkPrivacy:function(c,event){Event.stop(event);this.synchronizeBulkModerationButtons(false);selectedCommentIDs=[];for(var b in this.selectedCommentsMap)selectedCommentIDs.push(b);var a={is_private:c,in_moderation_queue:true,comment_ids:selectedCommentIDs,uniqids:selectedCommentIDs,controller_id:this.controllerID,owns_pages:this.userOwnsPages,in_aggregated_view:this.inAggregatedView,in_contextual_dialog:this.inContextualDialog};new AsyncRequest().setURI('/ajax/connect/comments/set_bulk_private.php').setData(a).send();return false;},toggleBlackListAndSync:function(b,event){Event.stop(event);var a=this.commentInfoMap[b].actor;var c={blacklist:!this.blacklistedActors[a],in_moderation_queue:this.inModerationQueue,comment_id:b,other_comment_ids:this.getOtherCommentsByActor(a,b),uniqid:b,controller_id:this.controllerID,owns_pages:this.userOwnsPages,in_aggregated_view:this.inAggregatedView,in_contextual_dialog:this.inContextualDialog};new AsyncRequest().setURI('/ajax/connect/comments/set_blacklist.php').setData(c).setHandler(function(d){this.blacklistedActors[a]=!this.blacklistedActors[a];if(this.blacklistedActors[a]){this.recentlyBlacklistedActors[a]=true;}else delete this.recentlyBlacklistedActors[a];}.bind(this)).send();return false;},getOtherCommentsByActor:function(a,b){return this.actorToCommentInfoMap[a].filter(function(c){return c!=b;});},fetchMoreComments:function(c,b,event){Event.kill(event);CSS.addClass(b,'async_saving');var a={is_reply_thread:false,in_moderation_queue:false,view_as_moderator:false};copy_properties(a,c);a.recently_blacklisted=this.getRecentlyBlacklistedActors();a.offset=this.getVisibleCommentCount(a);if(!a.aggregate_view)delete a.aggregate_view;if(!a.comment_id)delete a.comment_id;if(!a.is_reply_thread)a.comment_ids=this.commentIDs;new AsyncRequest().setURI('/ajax/connect/feedback.php').setReadOnly(true).setData(a).send();},getVisibleCommentCount:function(b){var e=this.getCommentsSelector(b);var a=DOM.scry($(b.controller_id),e);var d=0;for(var c=0;c<a.length;c++)if(!CSS.hasClass(a[c],'fbCommentIgnored'))d++;return d;},getCommentsSelector:function(a){var b=a.is_reply_thread?'li.fbCommentReply':'li.fbTopLevelComment';if(a.controller_id!=a.uniqid)b='div[id="'+a.uniqid+'"] '+b;return b;},getRecentlyBlacklistedActors:function(){var b=[];for(var a in this.recentlyBlacklistedActors)b.push(a);return b;},attachContextualDialogHandlers:function(){this.documentClickListener=Event.listen(document.documentElement,'click',this.closeContextualDialog.bind(this));},closeContextualDialog:function(event){var a=event.getTarget();var b=Parent.byClass(a,'fbCommentContext');if(!b)this.destroyContextualDialog();},destroyContextualDialog:function(){this.documentClickListener.remove();delete this.documentClickListener;var a=this.controllerID;Feedback.closeContextualDialog(a);}});}
ConnectLogin={init:function(a){this.appID=a.appID;this.oneClick=a.oneClick;XD.init(a);},login:function(a,c,b){if(this.oneClick&&!c){this._oneClick(a);}else this._openPopup(a,c,b);},logout:function(){XD.send({type:'logout'});},_oneClick:function(a){new AsyncRequest().setURI('/ajax/api/tos.php').setData({app_id:this.appID,grant_perm:1}).setHandler(function(b){ConnectLogin._refreshLoginStatus();a&&a();}).send();},_openPopup:function(c,e,d){d=d||{};var b=WindowComm.makeHandler(function(h){ConnectLogin._closePopup();if(ConnectLogin.appID)ConnectLogin._refreshLoginStatus();c&&c();}),a=WindowComm.makeHandler(function(h){ConnectLogin._closePopup();}),g=new URI('/login.php');g.setQueryData({api_key:this.appID,next:b,channel_url:a,cancel_url:a,req_perms:e,v:'1.0',fbconnect:1,display:'popup'});g.addQueryData(d);var f=this._getSize(d);this._popup=PopupResizer.open(g.toString(),f.height,f.width);},_closePopup:function(){if(this._popup){this._popup.close();this._popup=null;}},_refreshLoginStatus:function(){XD.send({type:'refreshLoginStatus'});},_getSize:function(a){if(a.social_plugin=='registration'){return {width:640,height:370};}else return {width:610,height:280};}};
function Overlay(){}!function(){var a=null;copy_properties(Overlay,{getInstance:function(b){var c=Parent.byClass(b,'uiOverlay');return c?DataStore.get(c,'overlay'):null;}});Overlay.mixin('Arbiter',{_root:null,_transitionSubscription:null,destroyOnHide:true,init:function(d){this._transitionSubscription=Arbiter.subscribe('page_transition',this.hide.bind(this,true,false),Arbiter.SUBSCRIBE_NEW);if(HTML.isHTML(d)){this._root=HTML.replaceJSONWrapper(d).getRootNode();}else this._root=d;DataStore.set(this._root,'overlay',this);this._overlay=DOM.scry(this._root,'div.uiOverlay')[0]||this._root;var f=DataStore.get(this._root,'width');f&&this.setWidth(f);var b=DataStore.get(this._root,'destroyonhide')!='false';this.setDestroyOnHide(b);var e=DataStore.get(this._root,'optimistic')=='true';this.setOptimistic(e);DOM.appendContent(document.body,this._root);Event.listen(this._root,'click',this.click.bind(this));var c=DOM.scry(this._root,'form.uiOverlayContent')[0];if(c)Event.listen(c,'submit',this.submit.bind(this));this.setFixed(DataStore.get(this._root,'fixed',false));return this;},setDestroyOnHide:function(b){this.destroyOnHide=b;return this;},setOptimistic:function(b){this.optimistic=b;return this;},setWidth:function(b){this.width=parseInt(b,10);return this;},setFixed:function(b){this.fixed=b;return this;},show:function(){this.updatePosition();CSS.show(this._root);this.fixed&&this.adjustFixedPosition();this.inform('show');return this;},adjustFixedPosition:function(){var g=Vector2.getElementPosition(this._root,'viewport');var f=Vector2.getElementDimensions(this._overlay).y;var h=Vector2.getViewportDimensions().y;var e=g.y+f;if(e>h){var d=h-e;g=g.add(new Vector2(0,d));var b=DOM.scry(this._root,'.uiOverlayArrow')[0];if(b){var c=parseInt(CSS.getStyle(b,'top'),10)-d;CSS.setStyle(b,'top',c+'px');}g=new Vector2(g.x,g.y,'document');g.setElementPosition(this._root);}},hide:function(b){if(this.inform('beforehide')===false)return;var c=function(){this._root&&CSS.hide(this._root);this.inform('hide');this.destroyOnHide&&this.destroy();}.bind(this);if(b!==false){animation(this._root).to('opacity',0).hide().duration(250).checkpoint().to('opacity',1).duration(0).ondone(c).go();}else c();},destroy:function(){Arbiter.unsubscribe(this._transitionSubscription);DOM.remove(this._root);DataStore.remove(this._root,'overlay');this._root=null;},click:function(c){var b=Parent.byClass(c.getTarget(),'uiOverlayButton');if(b){a=b;if(CSS.hasClass(b,'uiOverlayCancelButton')){if(this.inform('cancel')!==false)this.hide();c.prevent();}}},submit:function(d){var e=d.getTarget();if(this.inform('submit')!==false){var g=(Form.getAttribute(e,'method')||'GET').toUpperCase();var c=Form.serialize(e,a);Form.setDisabled(e,true);var h=Parent.byClass(a,'stat_elem')||e;var b=Form.getAttribute(e,'ajaxify')||Form.getAttribute(e,'action');var f=function(){if(this.inform('success')!==false)this.hide();}.bind(this);if(this.optimistic){f();f=bagofholding;}new AsyncRequest(b).setData(c).setNectarModuleDataSafe(e).setReadOnly(g=='GET').setMethod(g).setStatusElement(h).setRelativeTo(e).setHandler(f).setErrorHandler(function(i){this.inform('error');}.bind(this)).setFinallyHandler(Form.setDisabled.bind(null,e,false)).send();}d.kill();},updatePosition:function(){CSS.setStyle(this._overlay,'width',this.width+'px');}});}();
function ContextualDialogX(){this.parent.construct(this);return this;}ContextualDialogX.extend('Overlay');copy_properties(ContextualDialogX,{ARROW_OFFSET:22,HALO_WIDTH:6,getInstance:function(b){var a=DataStore.get(b,'ContextualDialogX');if(!a){var c=Parent.byClass(b,'uiContextualDialogPositioner');a=c&&DataStore.get(c,'overlay');}return a;}});ContextualDialogX.prototype={init:function(c){this.parent.init(c);var b=DataStore.get.curry(this._root);this.setAlignH(b('alignh','left'));this.setOffsetX(b('offsetx',0));this.setOffsetY(b('offsety',0));this.setPosition(b('position'));var a=b('context');if(a){this.setContext($(a));}else{a=b('contextselector');if(a)this.setContext(DOM.find(document,a));}var e=null;var d=null;this.subscribe('show',function(){e=Event.listen(window,'resize',function(){this.updatePosition();}.bind(this));d=Arbiter.subscribe('reflow',this.updatePosition.shield(this));}.bind(this));this.subscribe('hide',function(){e.remove();Arbiter.unsubscribe(d);});},setAlignH:function(a){this.alignH=a;return this;},getContext:function(){return this.context;},setContext:function(a){if(this.context&&this.context!=a)DataStore.remove(this.context,'ContextualDialogX');this.context=$(a);DataStore.set(this.context,'ContextualDialogX',this);return this;},listen:function(b,a){return Event.listen(this._root,b,a);},setOffsetX:function(a){this.offsetX=parseInt(a,10)||0;return this;},setOffsetY:function(a){this.offsetY=parseInt(a,10)||0;return this;},setPosition:function(a){this.position=a;return this;},updatePosition:function(){if(!this.context)return;this.parent.updatePosition();var c=this.fixed?'viewport':'document';var g=Vector2.getElementPosition(this.context,c);var a=Vector2.getElementDimensions(this.context);var j=this.position=='above'||this.position=='below';var d=intl_locale_is_rtl();if(d!=(this.position=='right'))g=g.add(a.x,0);if(this.position=='below')g=g.add(0,a.y);var f=new Vector2(0,0);var b=this.width+2*ContextualDialogX.HALO_WIDTH;if(j&&this.alignH=='center'){f=f.add((a.x-b)/2,0);}else{f=f.sub(j?ContextualDialogX.HALO_WIDTH:0,j?0:ContextualDialogX.HALO_WIDTH);var i=j?a.x:a.y;var e=2*(ContextualDialogX.ARROW_OFFSET+ContextualDialogX.HALO_WIDTH);if(i<e){var h=i/2-ContextualDialogX.ARROW_OFFSET;f=f.add(j?h:0,j?0:h);}}if(j&&this.alignH=='right')f=f.mul(-1,1).add(a.x-b,0);f=f.add(this.offsetX,this.offsetY);if(d)f=f.mul(-1,1);g=g.add(f);if(this.fixed)g=new Vector2(g.x,g.y,'document');g.setElementPosition(this._root);},scrollTo:function(){if(this.context)Bootloader.loadComponents('dom-scroll',function(){DOMScroll.scrollTo(this.context,true,true);}.bind(this));},destroy:function(){this.context&&DataStore.remove(this.context,'ContextualDialogX');this.parent.destroy();}};
if(!window.Feedback){window.Feedback=function(){};Feedback.comments={};Feedback.registerComment=function(b,a){Feedback.comments[b]=a;return Feedback;};Feedback.getRegisteredComment=function(a){return Feedback.comments[a];};Feedback.deleteClickHandler=function(f,c,a,e,d){var b=new Dialog().setTitle(_tx("Slet opslag")).setBody(_tx("Er du sikker p\u00e5, at du vil slette dette opslag")).setButtons([Dialog.newButton('delete',_tx("Slet")),Dialog.CANCEL]).setHandler(function(event){new AsyncRequest().setURI('/ajax/connect/feedback.php').setData({command:'delete',url:f,uniqid:e,owns_pages:d,controller_id:a,comment_id:c}).send();}.bind(this)).show();};Feedback.resizeCommentas=function(e){var c=DOM.scry(e,'div.post')[0];if(c){var g=Vector2.getElementDimensions(c).x;var a=DOM.find(c,'.commentas');var b=Vector2.getElementDimensions(a).x;if((g-b)<190){CSS.setStyle(a,'width',g-190+'px');var f=DOM.scry(a,'span.commentas_inner')[0];if(f){var d=Vector2.getElementDimensions(f).x;CSS.setStyle(a,'width',d+'px');}}}};Feedback.exposeContextualDialogReply=function(b){var c=$(b);var a=c.parentNode.parentNode;CSS.show(DOM.find(a,"form"));DOM.find(a,"textarea").focus();return false;};Feedback.concealContextualDialogReply=function(b){var f=$(b);var a=f.parentNode.parentNode;var c=DOM.find(a,"form");var e=DOM.find(a,"textarea");var d=e.value.length;if(!Input.getValue(e))CSS.hide(c);return false;};Feedback.closeContextualDialog=function(a){var b=ContextualDialogX.getInstance($(a));b.hide();return false;};Feedback.attachReplyListener=function(a){var b=DOM.find(a,'textarea');a.suppressBlur=false;Event.listen(a,'click',function(c){var d=c.getTarget();var f=Parent.byClass(d,'commentas')!==null;var e=Parent.byClass(d,'uiButton')!==null;var g=Parent.byClass(d,'uiSelector')!==null;a.suppressBlur=f||e||g;});Event.listen(b,'blur',function(d,c){if(a.interval)return;a.interval=(function(e,f){if(e.suppressBlur||Input.getValue(f)||f==document.activeElement)return;CSS.hide(e);e.suppressBlur=false;clearInterval(e.interval);delete e.interval;}).curry(a,d).recur(100);}.curry(b));};Feedback.resetInput=function(b){var a=MentionsInput.getInstance(b);if(a){a.reset({flattened:'',mention_data:{}});}else Input.setValue(b,'');};}
onloadRegister(function(){Event.listen(document.documentElement,'submit',function(b){var a=b.getTarget().getElementsByTagName('*');for(var c=0;c<a.length;c++)if(a[c].getAttribute('required')&&Input.isEmpty(a[c])){a[c].focus();return false;}},Event.Priority.URGENT);});